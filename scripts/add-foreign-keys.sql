ALTER TABLE `users` ADD CONSTRAINT `users_organization_id_fkey` FOREIGN KEY (`organization_id`) REFERENCES `organizations`(`id`) ON DELETE CASCADE ON UPDATE CASCADE;
ALTER TABLE `database_connections` ADD CONSTRAINT `database_connections_organization_id_fkey` FOREIGN KEY (`organization_id`) REFERENCES `organizations`(`id`) ON DELETE CASCADE ON UPDATE CASCADE;
ALTER TABLE `database_connections` ADD CONSTRAINT `database_connections_created_by_fkey` FOREIGN KEY (`created_by`) REFERENCES `users`(`id`) ON DELETE RESTRICT ON UPDATE CASCADE;
ALTER TABLE `chat_sessions` ADD CONSTRAINT `chat_sessions_organization_id_fkey` FOREIGN KEY (`organization_id`) REFERENCES `organizations`(`id`) ON DELETE CASCADE ON UPDATE CASCADE;
ALTER TABLE `chat_sessions` ADD CONSTRAINT `chat_sessions_database_connection_id_fkey` FOREIGN KEY (`database_connection_id`) REFERENCES `database_connections`(`id`) ON DELETE CASCADE ON UPDATE CASCADE;
ALTER TABLE `chat_sessions` ADD CONSTRAINT `chat_sessions_created_by_fkey` FOREIGN KEY (`created_by`) REFERENCES `users`(`id`) ON DELETE CASCADE ON UPDATE CASCADE;
ALTER TABLE `chat_messages` ADD CONSTRAINT `chat_messages_session_id_fkey` FOREIGN KEY (`session_id`) REFERENCES `chat_sessions`(`id`) ON DELETE CASCADE ON UPDATE CASCADE;
ALTER TABLE `saved_reports` ADD CONSTRAINT `saved_reports_organization_id_fkey` FOREIGN KEY (`organization_id`) REFERENCES `organizations`(`id`) ON DELETE CASCADE ON UPDATE CASCADE;
ALTER TABLE `saved_reports` ADD CONSTRAINT `saved_reports_database_connection_id_fkey` FOREIGN KEY (`database_connection_id`) REFERENCES `database_connections`(`id`) ON DELETE CASCADE ON UPDATE CASCADE;
ALTER TABLE `saved_reports` ADD CONSTRAINT `saved_reports_created_by_fkey` FOREIGN KEY (`created_by`) REFERENCES `users`(`id`) ON DELETE CASCADE ON UPDATE CASCADE;
ALTER TABLE `llm_connections` ADD CONSTRAINT `llm_connections_organization_id_fkey` FOREIGN KEY (`organization_id`) REFERENCES `organizations`(`id`) ON DELETE CASCADE ON UPDATE CASCADE;
ALTER TABLE `llm_connections` ADD CONSTRAINT `llm_connections_created_by_fkey` FOREIGN KEY (`created_by`) REFERENCES `users`(`id`) ON DELETE CASCADE ON UPDATE CASCADE;
ALTER TABLE `data_dictionaries` ADD CONSTRAINT `data_dictionaries_organization_id_fkey` FOREIGN KEY (`organization_id`) REFERENCES `organizations`(`id`) ON DELETE CASCADE ON UPDATE CASCADE;
ALTER TABLE `data_dictionaries` ADD CONSTRAINT `data_dictionaries_database_connection_id_fkey` FOREIGN KEY (`database_connection_id`) REFERENCES `database_connections`(`id`) ON DELETE CASCADE ON UPDATE CASCADE;
ALTER TABLE `data_dictionaries` ADD CONSTRAINT `data_dictionaries_created_by_fkey` FOREIGN KEY (`created_by`) REFERENCES `users`(`id`) ON DELETE CASCADE ON UPDATE CASCADE;
ALTER TABLE `sql_policies` ADD CONSTRAINT `sql_policies_organization_id_fkey` FOREIGN KEY (`organization_id`) REFERENCES `organizations`(`id`) ON DELETE CASCADE ON UPDATE CASCADE;
ALTER TABLE `sql_policies` ADD CONSTRAINT `sql_policies_created_by_fkey` FOREIGN KEY (`created_by`) REFERENCES `users`(`id`) ON DELETE CASCADE ON UPDATE CASCADE;
ALTER TABLE `data_permissions` ADD CONSTRAINT `data_permissions_organization_id_fkey` FOREIGN KEY (`organization_id`) REFERENCES `organizations`(`id`) ON DELETE CASCADE ON UPDATE CASCADE;
ALTER TABLE `data_permissions` ADD CONSTRAINT `data_permissions_database_connection_id_fkey` FOREIGN KEY (`database_connection_id`) REFERENCES `database_connections`(`id`) ON DELETE CASCADE ON UPDATE CASCADE;
ALTER TABLE `data_permissions` ADD CONSTRAINT `data_permissions_created_by_fkey` FOREIGN KEY (`created_by`) REFERENCES `users`(`id`) ON DELETE CASCADE ON UPDATE CASCADE;
ALTER TABLE `audit_logs` ADD CONSTRAINT `audit_logs_organization_id_fkey` FOREIGN KEY (`organization_id`) REFERENCES `organizations`(`id`) ON DELETE CASCADE ON UPDATE CASCADE;
ALTER TABLE `audit_logs` ADD CONSTRAINT `audit_logs_user_id_fkey` FOREIGN KEY (`user_id`) REFERENCES `users`(`id`) ON DELETE CASCADE ON UPDATE CASCADE;
ALTER TABLE `system_settings` ADD CONSTRAINT `system_settings_organization_id_fkey` FOREIGN KEY (`organization_id`) REFERENCES `organizations`(`id`) ON DELETE CASCADE ON UPDATE CASCADE;
ALTER TABLE `system_settings` ADD CONSTRAINT `system_settings_updated_by_fkey` FOREIGN KEY (`updated_by`) REFERENCES `users`(`id`) ON DELETE RESTRICT ON UPDATE CASCADE;
ALTER TABLE `query_templates` ADD CONSTRAINT `query_templates_organization_id_fkey` FOREIGN KEY (`organization_id`) REFERENCES `organizations`(`id`) ON DELETE CASCADE ON UPDATE CASCADE;
ALTER TABLE `query_templates` ADD CONSTRAINT `query_templates_database_connection_id_fkey` FOREIGN KEY (`database_connection_id`) REFERENCES `database_connections`(`id`) ON DELETE SET NULL ON UPDATE CASCADE;
ALTER TABLE `query_templates` ADD CONSTRAINT `query_templates_created_by_fkey` FOREIGN KEY (`created_by`) REFERENCES `users`(`id`) ON DELETE CASCADE ON UPDATE CASCADE;
